/* ----------------------------------------- */
/*  ChatMessage Styles                       */
/* ----------------------------------------- */

.chat-message:has( .skyfall ),
.chat-message.skyfall {
	background: url(./assets/sheet/background.webp) repeat white;
	&.character, &.guild, &.creation {
		color: @colorSFPlayer;
	}
	&.npc, &.partner {
		color: @colorSFFoe;
	}
}

.chat-message.skyfall {
	.dsn-hide {
		display: flex !important;
	}
	&.catharsis {
		.message-header {
			position: relative;
			z-index: 2;
			color: white;
			&::before {
				content: "";
				width: calc(100% + 10px);
				height: calc(100% + 10px);
				left: -5px;
				top: -5px;
				background: #222b54;
				position: absolute;
				z-index: -1;
			}
		}
		.message-content *:not(button) {
			text-align: left !important;
		}
	}
}


.chat-message:has( .usage-card ) {
	position: relative;
	.header-overlay {
		overflow: hidden;
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		&.character, &.guild, &.creation {
			background: url(./assets/sheet/chat-header-player.svg) no-repeat;
			background-size: 140%;
			background-position: 30% -75px;
		}
		&.npc, &.partner {
			background: url(./assets/sheet/chat-header-foe.svg) no-repeat;
			background-size: 140%;
			background-position: 30% -75px;
		}
		// background: url(./assets/sheet/chat-header-playerfoe.svg) no-repeat;
	}

	// border-image: url(./assets/sheet/border.svg) 1;
	// border-image: url(./assets/sheet/card-border.svg) 1;
	&.character {
		color: @colorSFPlayer;
	}
	&.npc {
		color: @colorSFFoe;
	}

	// border-image-repeat: stretch;
	// border-image-outset: 0;
	// border-image-slice: 10;
	// border-image-width: 10px;
	// padding: 0px;

	.message-header {
		// background-color: @colorSFPlayer;
		color: white;
		z-index: 2;
	}
	
}
.chat-message:has( .character ),
.chat-message:has( .guild ) {
	.descriptor-reference {
		background-color: @colorSFPlayer;
	}
}
.chat-message:has( .npc ) {
	.descriptor-reference {
		background-color: @colorSFFoe;
	}
}

.skyfall {
	&.usage-card {
		position: relative;
		// color: @colorSFPlayer;
		// padding: 0 10px 10px 10px;
		// padding-top: 20px;
		.card-header {
			// border-image: url(./assets/sheet/card-border.svg) 1;
			// background-color: @colorSFPlayer;
			font-family: @fontSkyfall;
			color: white;
			position: relative;
			width: 85%;
			min-height: 45px;
			height: 45px;
			max-height: 50px;
			float: left;
			top: -10px;
			align-items: center;
			align-content: center;
			// margin-bottom: 1em;
			.icon {
				flex: 0;
			}
			h1, h2, h3, h4, h5, h6 {
				margin: 0;
			}
			.item-name {
				margin-left: 10px;
				line-height: 1em;
				font-size: 20px;
			}
			.fonts22 { font-size: 22px; }
			.fonts20 { font-size: 20px; }
			.fonts18 { font-size: 18px; }
			.fonts16 { font-size: 16px; }
			.fonts14 { font-size: 14px; }
			.fonts12 { font-size: 12px; }
		}
		
		.card-aside {
			// background-color: @colorSFPlayer;
			color: white;
			position: relative;
			width: 15%;
			float: right;
			align-items: center;
			min-height: 55px;
		}

		.ability-descriptors {
			line-height: var(--font-size-20);
			label.descriptor {
				font-size: 12px;
				padding: 2px;
				line-height: 23px;
			}
		}

		.ability-properties {
			p {
				margin: 0;
				label {
					font-weight: bold;
				}
			}

		}
		.rich {
			label {
				font-weight: bold;
			}
			label + * {
				display: inline;
			}
			* { margin: 0; }
		}

		.chat-actions {
			width: 100%;

			.effect {
				display: flex;
				flex-direction: row;
				padding-left: 0px;
				img {
					flex: 0 0 32px;
					background-color: black;
					margin-right: 1em;
				}
			}
		}

		.roll-entry {
			position: relative;
			.dice-formula, .dice-total {
				position: relative;
				button {
					width: 28px;
					min-height: 26px;
					max-height: 26px;
					font-size: 14px;
					line-height: 22px;
					position: absolute;
					padding: 0;
					i { margin: 0; }
					.sf-icon { vertical-align: middle; }
					svg, svg image { width: 16px; height: 16px;}
					// Top Buttons
					&[data-apply-catharsis="-"],
					&[data-apply-catharsis="+"],
					&[data-evaluate-roll="1"] {
						top: -1px;
						right: 0;
					}
					&[data-apply-catharsis="-"] {
						left: 0;
					}
					// Bottom Buttons
					&[data-apply-damage="-1"], 
					&[data-apply-damage="0.5"], 
					&[data-apply-damage="1"], 
					&[data-apply-damage="2"] {
						bottom: -1px;
					}
					&[data-apply-damage="1"] {
						left: 0;
					}
					&[data-apply-damage="0.5"] {
						left: 30px;
					}
					&[data-apply-damage="-1"] {
						right: 0;
					}
					&[data-apply-damage="2"] {
						right: 30px;
					}
				}
			}
		}

		.roll-btns { 
			position: absolute;
			&.top { top: 15px }
			&.bottom { bottom: 0px }
			&.left { float: left; left: 0px }
			&.right { float: right; right: 0px }
			button {
				width: 28px;
				font-size: 14px;
				line-height: 22px;
			}
		}
	}
}